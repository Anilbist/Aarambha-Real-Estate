<!DOCTYPE html>
<html
        lang="en"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head
        th:replace="~{layouts/main_layout :: head(title = 'Aarambha Real Estate')}"
>
 
    <script src="https://jquery.gocache.net/jquery-3.5.1.min.js"
        type="text/javascript"></script>
    <script src="/webjars/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</head>

<body>
<nav th:replace="~{layouts/main_layout :: nav}"></nav>

<main class="page faq-page">
    <section
            class="clean-block clean-faq dark"
            style="background-color: rgb(255,255,255);"
    >
        <div class="container">
            <div class="block-heading">
                <h2 class="text-info">Details</h2>
            </div>

            

            <div class="block-content">
                <div class="alert alert-success" role="alert" th:if="${success}">
                    New add was created!
                </div>

                <div class="faq-item">
                    <h5 th:text="${adds.title}">Lorem Ipsum dolor sit amet</h5>
                    <img alt="No Image Attached" style="width: 100%; height: 80%" th:src="${adds.imageBase64}">
                    <div class="info">
                <span
                        class="text-muted">
                    <span
                        th:title="${adds.getCreationDate()}"
                        th:datetime="${adds.getCreationDate()}"
                        th:text="${adds.getPrettyTime()}"
                        style="margin-top: 10px;">
                        >4 hours ago by</span> by <a
                        href="#"
                        th:href="@{'/u/' + ${adds.getUser().getId()}}"
                        th:text="${adds.getUser().getUsername()}"
                        style="color: rgb(0,123,255);"
                ></a
                ></span
                >
                    </div>

                    <p
                            th:text="${adds.url}"
                            style="font-size: 16px;margin-bottom: 20px;margin-top: 10px;"
                    >
                    </p>

                    <span class="d-lg-flex align-items-lg-center" th:text="|All ${adds.getComments().size()} comments:|"
                    ><i
                            class="icon-bubbles"
                            style="margin-right: 7px;font-size: 20px;"
                    ></i
                    >0 Comments</span
                    >

                    <form sec:authorize="isAuthenticated()" id="frmAddComment" method="POST" th:action="@{/adds/comments}" th:object="${comment}">
                        <input type="hidden" th:field="*{adds}"/>
                        <div class="form-group">
                            <textarea class="form-control" id="comment" rows="3" th:field="*{body}"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" >Add Comment</button>
                    </form>

                    <hr />
                </div>
                <div class="faq-item" th:each="comment : ${adds.getComments()}">
                    <div id="comment" class="answer" style="padding: 15px;">
                <span
                        class="text-muted" style="margin-top: 10px;margin-bottom: 20px;font-size: 15px;">
                    <span th:title="${comment.getCreationDate()}"
                        th:datetime="${comment.getCreationDate()}" th:text="${comment.getPrettyTime()}"

                >4 hours ago by</span> by <a
                        href="#"
                        style="color: rgb(0,123,255);" th:text="${comment.getCreatedBy()}"
                >John Smith</a
                ></span
                >
                        <p th:text="${comment.getBody()}"
                                style="color: rgba(0,0,0,0.93);margin: 0;margin-top: 10px;font-size: 15px;"
                        >
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc
                            quam urna, dignissim nec auctor in, mattis vitae leo. Lorem
                            ipsum dolor sit amet, consectetur adipiscing elit.&nbsp;Lorem
                            ipsum dolor sit amet, consectetur adipiscing elit.
                        </p>
                    </div>
                </div>
                <p>
  <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" 
     role="button" aria-expanded="false" aria-controls="collapseExample">Send Message
  </a></p>
  <div class="collapse" id="collapseExample">
                <div sec:authorize="isAuthenticated()">
                <form
                        method="POST"
                        th:action="@{/message/add/submit/(id=${adds.getUser().getId()},addId=${adds.getId()})}"
                        th:object="${m}"
                        class="shadow"
                >

                    <div class="form-group">
          <textarea
                  id="body"
                  class="form-control"
                  name="messageText"
                  placeholder="Send Personal Message"
                  rows="3"
                  required="required"
                  th:field="*{messageText}"
          >
              </textarea>
                        <small th:errors="*{messageText}" style="color:red;"></small>
                    </div>

                    <button class="btn btn-primary col-12" type="submit">
                        Send
                    </button>
                </form>
                </div>
      <br>
      <br><!-- comment -->
  </div>
  <br>
  <h4>See On Naksa</h4>
  <br>
  
  
 
  
  
  


<!--Google Maps -->


<div id="map" class="mapa" th:attr="data-latitude=${adds.latitude},data-longitude=${adds.longitude}" style="height: 500px">hello</div>

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap&libraries=&v=weekly"
      async defer></script>
  
    
    
    
    <script th:inline="javascript" >
        let map;
      
         
    function initMap() {
//        var shop = { lat: [[${adds.latitude}]], lng: [[${adds.longitude}]] };
          
              var lat = parseFloat($('.mapa').attr('data-latitude'));
             var lng = parseFloat($('.mapa').attr('data-longitude'));
             var loc = { lat: lat, lng: lng };
//         console.log(lat);
//         console.log(lng);
           console.log(loc);
           const map = new google.maps.Map(document.getElementById("map"), {
                center: loc,
                zoom: 18
            });
            const marker = new google.maps.Marker({
          position: {lat: lat, lng: lng},
          map: map,
        });

        }
//     initMap(parseFloat(lat), parseFloat(lng))
       
    </script> 






 
      <!-- <div class="mapa"
            th:attr="data-latitude=${submit.latitude},data-longitude=${submit.longitude}"
            id="map" style="width: 100%; height: 800px;"> hello</div> 
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHoL-VAHBpNX-6eiIVBwdALwGWSslarXA&callback=initMap&libraries=&v=weekly" async defer ></script>
    <script th:inline="javascript" >
        let map;
      var lat = $('.mapa').attr('data-latitude')
      var lng = $('.mapa').attr('data-longitude') 

    function initMap(lat, lng) {
           const map = new google.maps.Map(document.getElementById("map"), {
                center: { lat, lng },
                zoom: 8
            });
            const marker = new google.maps.Marker({
          position: lat,lng,
          map: map,
        });

        }
     initMap(parseFloat(lat), parseFloat(lng))
       
    </script> -->
 
            


        </div>
        
    </section>
    
</main>

</body>
</html>
